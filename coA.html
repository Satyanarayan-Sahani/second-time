<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Computer Organization and Architecture Quiz</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load React and ReactDOM production versions for speed -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Custom CSS for animations -->
    <style>
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }

      @keyframes fadeInLeft {
        from { opacity: 0; transform: translateX(10px); }
        to { opacity: 1; transform: translateX(0); }
      }

      .animate-fadeIn {
        animation: fadeIn 0.5s ease-out forwards;
      }

      .animate-fadeInLeft {
        animation: fadeInLeft 0.5s ease-out forwards;
      }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 transition-colors duration-300">
  <div id="root"></div>

  <!--
    The main React code, written in pure JavaScript for maximum performance.
    All JSX is replaced with React.createElement calls, removing the need for Babel.
  -->
  <script>
    const { useState, useRef, useEffect, createElement: e } = React;

    // Icon components from Lucide, manually defined as SVG to avoid external imports
    const BadgeCheck = (props) => e('svg', { ...props, xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" },
      e('path', { d: "M14.5 7h-9" }),
      e('path', { d: "M10 16L8 14" }),
      e('path', { d: "M17 14L12 19L10 17" }),
      e('path', { d: "M20 12.2V5a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12.2" }),
      e('path', { d: "M20 7h-3" }),
      e('path', { d: "M17 7V3" })
    );
    const RefreshCcw = (props) => e('svg', { ...props, xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" },
      e('path', { d: "M21 12a9 9 0 0 0-9-9" }),
      e('path', { d: "M3 12a9 9 0 0 0 9 9" }),
      e('path', { d: "M16 16.5L12 12.5L16 8.5" }),
      e('path', { d: "M8 12L12 8L8 4" }),
      e('path', { d: "M12 21L12 12" }),
      e('path', { d: "M21 12H3" }),
    );
    const ChevronLeft = (props) => e('svg', { ...props, xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" },
      e('path', { d: "m15 18-6-6 6-6" })
    );
    const ChevronRight = (props) => e('svg', { ...props, xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" },
      e('path', { d: "m9 18 6-6-6-6" })
    );
    const ChevronsRight = (props) => e('svg', { ...props, xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" },
      e('path', { d: "m6 17 5-5-5-5" }),
      e('path', { d: "m13 17 5-5-5-5" })
    );

    const questions = [
        {
          questionText: 'What is the primary function of the Control Unit (CU) in a CPU?',
          answerOptions: [
            { answerText: 'To perform arithmetic and logical operations.', isCorrect: false },
            { answerText: 'To store data and instructions.', isCorrect: false },
            { answerText: 'To fetch, decode, and execute instructions.', isCorrect: true },
            { answerText: 'To manage memory allocation.', isCorrect: false },
          ],
        },
        {
          questionText: 'Which component is responsible for performing calculations and comparisons in the CPU?',
          answerOptions: [
            { answerText: 'Control Unit (CU)', isCorrect: false },
            { answerText: 'Arithmetic Logic Unit (ALU)', isCorrect: true },
            { answerText: 'Registers', isCorrect: false },
            { answerText: 'Cache Memory', isCorrect: false },
          ],
        },
        {
          questionText: 'What is the fastest type of memory in a computer system?',
          answerOptions: [
            { answerText: 'Hard Disk Drive', isCorrect: false },
            { answerText: 'RAM (Random Access Memory)', isCorrect: false },
            { answerText: 'Cache Memory', isCorrect: false },
            { answerText: 'Registers', isCorrect: true },
          ],
        },
        {
          questionText: 'The concept of a small, fast memory holding recently accessed data from a larger, slower memory is known as...',
          answerOptions: [
            { answerText: 'Virtual memory', isCorrect: false },
            { answerText: 'Pipelining', isCorrect: false },
            { answerText: 'Caching', isCorrect: true },
            { answerText: 'Interleaving', isCorrect: false },
          ],
        },
        {
          questionText: 'Which addressing mode specifies the operand directly within the instruction?',
          answerOptions: [
            { answerText: 'Direct addressing', isCorrect: false },
            { answerText: 'Immediate addressing', isCorrect: true },
            { answerText: 'Register addressing', isCorrect: false },
            { answerText: 'Indirect addressing', isCorrect: false },
          ],
        },
        {
          questionText: 'What does CISC stand for?',
          answerOptions: [
            { answerText: 'Complex Instruction Set Computing', isCorrect: true },
            { answerText: 'Constant Instruction Speed Chip', isCorrect: false },
            { answerText: 'Combined Integrated System Chip', isCorrect: false },
            { answerText: 'Centralized Instruction System Control', isCorrect: false },
          ],
        },
        {
          questionText: 'Which of the following is a characteristic of a RISC architecture?',
          answerOptions: [
            { answerText: 'Complex instructions that can take multiple clock cycles.', isCorrect: false },
            { answerText: 'A large number of addressing modes.', isCorrect: false },
            { answerText: 'A fixed-length instruction format.', isCorrect: true },
            { answerText: 'Fewer general-purpose registers.', isCorrect: false },
          ],
        },
        {
          questionText: 'What is the purpose of the Program Counter (PC)?',
          answerOptions: [
            { answerText: 'To store the result of the last arithmetic operation.', isCorrect: false },
            { answerText: 'To hold the address of the next instruction to be fetched.', isCorrect: true },
            { answerText: 'To store the current instruction being executed.', isCorrect: false },
            { answerText: 'To count the number of clock cycles.', isCorrect: false },
          ],
        },
        {
          questionText: 'What is an interrupt?',
          answerOptions: [
            { answerText: 'A type of clock signal used for synchronization.', isCorrect: false },
            { answerText: 'A signal to the CPU indicating an event that requires immediate attention.', isCorrect: true },
            { answerText: 'A type of bus used for data transfer.', isCorrect: false },
            { answerText: 'An error in a program that causes it to crash.', isCorrect: false },
          ],
        },
        {
          questionText: 'Which bus is used to specify the physical location of data in memory?',
          answerOptions: [
            { answerText: 'Data bus', isCorrect: false },
            { answerText: 'Control bus', isCorrect: false },
            { answerText: 'Address bus', isCorrect: true },
            { answerText: 'System bus', isCorrect: false },
          ],
        },
        {
          questionText: 'The process of overlapping the execution of multiple instructions is called...',
          answerOptions: [
            { answerText: 'Multithreading', isCorrect: false },
            { answerText: 'Pipelining', isCorrect: true },
            { answerText: 'Caching', isCorrect: false },
            { answerText: 'Virtualization', isCorrect: false },
          ],
        },
        {
          questionText: 'What is a cache hit?',
          answerOptions: [
            { answerText: 'An instruction that executes correctly on the first attempt.', isCorrect: false },
            { answerText: 'When data is not found in the cache and must be retrieved from main memory.', isCorrect: false },
            { answerText: 'When the CPU successfully finds the requested data in the cache.', isCorrect: true },
            { answerText: 'A collision on the data bus.', isCorrect: false },
          ],
        },
        {
          questionText: 'What is the role of the Instruction Register (IR)?',
          answerOptions: [
            { answerText: 'To hold the address of the next instruction.', isCorrect: false },
            { answerText: 'To store the current instruction being executed.', isCorrect: true },
            { answerText: 'To store the programâ€™s data.', isCorrect: false },
            { answerText: 'To perform arithmetic operations.', isCorrect: false },
          ],
        },
        {
          questionText: 'A memory hierarchy consists of multiple levels of memory with different...',
          answerOptions: [
            { answerText: 'capacities, speeds, and costs.', isCorrect: true },
            { answerText: 'data types and formats.', isCorrect: false },
            { answerText: 'clock speeds and voltages.', isCorrect: false },
            { answerText: 'operating systems and applications.', isCorrect: false },
          ],
        },
        {
          questionText: 'Which type of instruction set architecture uses a large number of registers and a simple, fixed-length instruction format?',
          answerOptions: [
            { answerText: 'CISC', isCorrect: false },
            { answerText: 'RISC', isCorrect: true },
            { answerText: 'VLIW', isCorrect: false },
            { answerText: 'GPU', isCorrect: false },
          ],
        },
        {
          questionText: 'What is the purpose of the Memory Address Register (MAR)?',
          answerOptions: [
            { answerText: 'To hold the data that is being read from or written to memory.', isCorrect: false },
            { answerText: 'To hold the address of the memory location that is to be accessed.', isCorrect: true },
            { answerText: 'To store the current instruction being executed.', isCorrect: false },
            { answerText: 'To count the number of memory accesses.', isCorrect: false },
          ],
        },
        {
          questionText: 'Which part of the CPU generates the signals needed to control the flow of data?',
          answerOptions: [
            { answerText: 'ALU', isCorrect: false },
            { answerText: 'Registers', isCorrect: false },
            { answerText: 'Control Unit', isCorrect: true },
            { answerText: 'Data Bus', isCorrect: false },
          ],
        },
        {
          questionText: 'What is the term for a single, full CPU clock cycle?',
          answerOptions: [
            { answerText: 'Instruction cycle', isCorrect: false },
            { answerText: 'Machine cycle', isCorrect: true },
            { answerText: 'Bus cycle', isCorrect: false },
            { answerText: 'Memory cycle', isCorrect: false },
          ],
        },
        {
          questionText: 'In a pipelined processor, a data dependency that prevents the next instruction from starting is called a...',
          answerOptions: [
            { answerText: 'Cache miss', isCorrect: false },
            { answerText: 'Hazard', isCorrect: true },
            { answerText: 'Interrupt', isCorrect: false },
            { answerText: 'Stall', isCorrect: false },
          ],
        },
        {
          questionText: 'What is the primary advantage of a direct-mapped cache?',
          answerOptions: [
            { answerText: 'It has the lowest miss rate.', isCorrect: false },
            { answerText: 'It is the most complex to implement.', isCorrect: false },
            { answerText: 'It is simple and fast to implement, requiring no search.', isCorrect: true },
            { answerText: 'It allows any block to be placed anywhere in the cache.', isCorrect: false },
          ],
        },
        {
          questionText: 'Which I/O technique uses a dedicated hardware controller to transfer data between memory and an I/O device without CPU intervention?',
          answerOptions: [
            { answerText: 'Programmed I/O', isCorrect: false },
            { answerText: 'Interrupt-driven I/O', isCorrect: false },
            { answerText: 'Direct Memory Access (DMA)', isCorrect: true },
            { answerText: 'Polling', isCorrect: false },
          ],
        },
        {
          questionText: 'Which of the following is an example of a synchronous bus?',
          answerOptions: [
            { answerText: 'PCI Express (PCIe)', isCorrect: false },
            { answerText: 'A bus with a shared clock signal for all devices.', isCorrect: true },
            { answerText: 'An asynchronous bus', isCorrect: false },
            { answerText: 'A bus that uses handshaking signals.', isCorrect: false },
          ],
        },
        {
          questionText: 'What is the purpose of an instruction fetch cycle?',
          answerOptions: [
            { answerText: 'To store the result of an operation in a register.', isCorrect: false },
            { answerText: 'To retrieve the next instruction from memory.', isCorrect: true },
            { answerText: 'To perform an arithmetic calculation.', isCorrect: false },
            { answerText: 'To decode the current instruction.', isCorrect: false },
          ],
        },
        {
          questionText: 'What is a microprogram?',
          answerOptions: [
            { answerText: 'A program that runs in a small section of RAM.', isCorrect: false },
            { answerText: 'A sequence of micro-operations that performs a machine-level instruction.', isCorrect: true },
            { answerText: 'A low-level operating system.', isCorrect: false },
            { answerText: 'A collection of a CPU\'s microprocessors.', isCorrect: false },
          ],
        },
        {
          questionText: 'The concept where a block of instructions from a main memory is transferred to the cache is called...',
          answerOptions: [
            { answerText: 'Block transfer', isCorrect: true },
            { answerText: 'Memory swapping', isCorrect: false },
            { answerText: 'Paging', isCorrect: false },
            { answerText: 'Segmentation', isCorrect: false },
          ],
        },
        {
          questionText: 'Which of the following is a characteristic of a pipeline stall or bubble?',
          answerOptions: [
            { answerText: 'An instruction completes execution faster than expected.', isCorrect: false },
            { answerText: 'A temporary halt in the pipeline due to a dependency or hazard.', isCorrect: true },
            { answerText: 'The CPU performs two instructions simultaneously.', isCorrect: false },
            { answerText: 'The cache is filled with new data.', isCorrect: false },
          ],
        },
        {
          questionText: 'What does the acronym SRAM stand for?',
          answerOptions: [
            { answerText: 'Synchronous Random Access Memory', isCorrect: false },
            { answerText: 'Static Random Access Memory', isCorrect: true },
            { answerText: 'Serial Random Access Memory', isCorrect: false },
            { answerText: 'Systematic Random Access Memory', isCorrect: false },
          ],
        },
        {
          questionText: 'Which component stores the status of the CPU, such as carry and zero flags?',
          answerOptions: [
            { answerText: 'Instruction Register', isCorrect: false },
            { answerText: 'Program Counter', isCorrect: false },
            { answerText: 'Status Register (or Flag Register)', isCorrect: true },
            { answerText: 'Memory Data Register', isCorrect: false },
          ],
        },
        {
          questionText: 'What is the main role of the Memory Data Register (MDR)?',
          answerOptions: [
            { answerText: 'To hold the address of the memory location being accessed.', isCorrect: false },
            { answerText: 'To store the data that is being transferred to or from the memory unit.', isCorrect: true },
            { answerText: 'To store the next instruction to be fetched.', isCorrect: false },
            { answerText: 'To count the number of memory transactions.', isCorrect: false },
          ],
        },
        {
          questionText: 'Which type of interrupt is triggered by a software instruction?',
          answerOptions: [
            { answerText: 'Hardware interrupt', isCorrect: false },
            { answerText: 'External interrupt', isCorrect: false },
            { answerText: 'Software interrupt (trap)', isCorrect: true },
            { answerText: 'Maskable interrupt', isCorrect: false },
          ],
        },
        {
          questionText: 'The number of bits that can be transferred simultaneously on the data bus is known as the...',
          answerOptions: [
            { answerText: 'Clock speed', isCorrect: false },
            { answerText: 'Bus width', isCorrect: true },
            { answerText: 'Bandwidth', isCorrect: false },
            { answerText: 'Latency', isCorrect: false },
          ],
        },
        {
          questionText: 'What is the purpose of a memory-mapped I/O?',
          answerOptions: [
            { answerText: 'I/O devices are assigned unique addresses and are accessed like memory locations.', isCorrect: true },
            { answerText: 'I/O devices have a separate address space and use dedicated I/O instructions.', isCorrect: false },
            { answerText: 'The CPU polls the I/O devices to check their status.', isCorrect: false },
            { answerText: 'I/O devices can only communicate with the CPU via interrupts.', isCorrect: false },
          ],
        },
        {
          questionText: 'In a pipelined architecture, what is a branch prediction?',
          answerOptions: [
            { answerText: 'The CPU always assumes a branch will not be taken.', isCorrect: false },
            { answerText: 'A technique to guess the outcome of a conditional branch to avoid pipeline stalls.', isCorrect: true },
            { answerText: 'An error that occurs during a branch instruction.', isCorrect: false },
            { answerText: 'A type of unconditional jump instruction.', isCorrect: false },
          ],
        },
        {
          questionText: 'Which of the following is a key characteristic of volatile memory?',
          answerOptions: [
            { answerText: 'It retains its data even when power is turned off.', isCorrect: false },
            { answerText: 'It requires a refresh cycle to retain data.', isCorrect: true },
            { answerText: 'It is typically used for long-term storage.', isCorrect: false },
            { answerText: 'It is typically slower than non-volatile memory.', isCorrect: false },
          ],
        },
        {
          questionText: 'What is the difference between a Harvard architecture and a Von Neumann architecture?',
          answerOptions: [
            { answerText: 'Harvard uses a single bus for both instructions and data; Von Neumann uses separate buses.', isCorrect: false },
            { answerText: 'Von Neumann uses a single bus for both instructions and data; Harvard uses separate buses.', isCorrect: true },
            { answerText: 'Harvard architecture is faster for single-core processors.', isCorrect: false },
            { answerText: 'Von Neumann architecture is more expensive to implement.', isCorrect: false },
          ],
        },
        {
          questionText: 'What is the purpose of an opcode in an instruction?',
          answerOptions: [
            { answerText: 'It specifies the memory address of the data.', isCorrect: false },
            { answerText: 'It tells the CPU what operation to perform (e.g., ADD, SUB, LOAD).', isCorrect: true },
            { answerText: 'It specifies the registers involved in the operation.', isCorrect: false },
            { answerText: 'It holds the immediate data value.', isCorrect: false },
          ],
        },
        {
          questionText: 'Which of the following is a type of parallel processing where multiple instructions operate on multiple data streams?',
          answerOptions: [
            { answerText: 'SIMD (Single Instruction, Multiple Data)', isCorrect: false },
            { answerText: 'SISD (Single Instruction, Single Data)', isCorrect: false },
            { answerText: 'MISD (Multiple Instruction, Single Data)', isCorrect: false },
            { answerText: 'MIMD (Multiple Instruction, Multiple Data)', isCorrect: true },
          ],
        },
        {
          questionText: 'What does the term "latency" refer to in a memory system?',
          answerOptions: [
            { answerText: 'The total time to read a block of data from memory.', isCorrect: false },
            { answerText: 'The time delay between a memory request and the start of data retrieval.', isCorrect: true },
            { answerText: 'The rate at which data can be transferred from memory.', isCorrect: false },
            { answerText: 'The number of memory locations that can be addressed.', isCorrect: false },
          ],
        },
        {
          questionText: 'What is the main advantage of pipelining?',
          answerOptions: [
            { answerText: 'It decreases the total time to execute a single instruction.', isCorrect: false },
            { answerText: 'It increases the throughput of the system by executing instructions concurrently.', isCorrect: true },
            { answerText: 'It reduces the power consumption of the CPU.', isCorrect: false },
            { answerText: 'It simplifies the design of the Control Unit.', isCorrect: false },
          ],
        },
        {
          questionText: 'Which of these is a type of addressing that uses the value of a register as the effective address?',
          answerOptions: [
            { answerText: 'Relative addressing', isCorrect: false },
            { answerText: 'Indexed addressing', isCorrect: false },
            { answerText: 'Register indirect addressing', isCorrect: true },
            { answerText: 'Stack addressing', isCorrect: false },
          ],
        },
        {
          questionText: 'What is the purpose of an interrupt vector table?',
          answerOptions: [
            { answerText: 'To store the addresses of I/O devices.', isCorrect: false },
            { answerText: 'To store the addresses of interrupt service routines (ISRs).', isCorrect: true },
            { answerText: 'To hold the current state of all registers.', isCorrect: false },
            { answerText: 'To manage the memory space of a program.', isCorrect: false },
          ],
        },
        {
          questionText: 'What is the difference between a cache miss and a cache hit?',
          answerOptions: [
            { answerText: 'A cache miss is when the data is found in the cache, and a cache hit is when it is not.', isCorrect: false },
            { answerText: 'A cache miss is when the data is not found in the cache, and a cache hit is when it is.', isCorrect: true },
            { answerText: 'A cache miss always results in an error.', isCorrect: false },
            { answerText: 'A cache hit is always faster than a cache miss.', isCorrect: false },
          ],
        },
        {
          questionText: 'Which of the following describes a fully associative cache?',
          answerOptions: [
            { answerText: 'Each memory block can only be placed in one specific cache line.', isCorrect: false },
            { answerText: 'A memory block can be placed in any cache line, but the tag is checked with a small set of cache lines.', isCorrect: false },
            { answerText: 'Any memory block can be placed in any cache line, requiring all cache tags to be checked.', isCorrect: true },
            { answerText: 'It has a fixed number of sets for data storage.', isCorrect: false },
          ],
        },
        {
          questionText: 'What is the purpose of an I/O controller?',
          answerOptions: [
            { answerText: 'To manage the flow of data between the CPU and an I/O device.', isCorrect: true },
            { answerText: 'To store program instructions.', isCorrect: false },
            { answerText: 'To perform arithmetic operations for the CPU.', isCorrect: false },
            { answerText: 'To handle all the communication on the system bus.', isCorrect: false },
          ],
        },
        {
          questionText: 'Which of the following is a key characteristic of non-volatile memory?',
          answerOptions: [
            { answerText: 'It requires a refresh cycle to maintain data.', isCorrect: false },
            { answerText: 'It loses its data when the power is turned off.', isCorrect: false },
            { answerText: 'It retains its data even without power.', isCorrect: true },
            { answerText: 'It is always faster than volatile memory.', isCorrect: false },
          ],
        },
        {
          questionText: 'What is a bus arbitration?',
          answerOptions: [
            { answerText: 'A method for selecting which device gets to use the bus at any given time.', isCorrect: true },
            { answerText: 'A set of signals that control data transfer.', isCorrect: false },
            { answerText: 'A measure of the bus\'s speed.', isCorrect: false },
            { answerText: 'A type of data transfer protocol.', isCorrect: false },
          ],
        },
        {
          questionText: 'Which of the following is an example of a synchronous bus?',
          answerOptions: [
            { answerText: 'A bus that uses handshaking signals to coordinate data transfer.', isCorrect: false },
            { answerText: 'A bus where all devices share a common clock signal.', isCorrect: true },
            { answerText: 'A bus where timing is based on the speed of the slowest device.', isCorrect: false },
            { answerText: 'A bus that requires no control signals.', isCorrect: false },
          ],
        },
        {
          questionText: 'What is the purpose of the Memory Address Register (MAR)?',
          answerOptions: [
            { answerText: 'To hold the data that is being read from or written to memory.', isCorrect: false },
            { answerText: 'To hold the address of the memory location that is to be accessed.', isCorrect: true },
            { answerText: 'To store the current instruction being executed.', isCorrect: false },
            { answerText: 'To count the number of memory accesses.', isCorrect: false },
          ],
        },
        {
          questionText: 'What is the main role of the Control Unit (CU) in a CPU?',
          answerOptions: [
            { answerText: 'To perform arithmetic and logical operations.', isCorrect: false },
            { answerText: 'To store data and instructions.', isCorrect: false },
            { answerText: 'To fetch, decode, and execute instructions.', isCorrect: true },
            { answerText: 'To manage memory allocation.', isCorrect: false },
          ],
        },
        {
          questionText: 'Which type of interrupt is triggered by a software instruction?',
          answerOptions: [
            { answerText: 'Hardware interrupt', isCorrect: false },
            { answerText: 'External interrupt', isCorrect: false },
            { answerText: 'Software interrupt (trap)', isCorrect: true },
            { answerText: 'Maskable interrupt', isCorrect: false },
          ],
        },
      ];

    // The main App component
    const App = () => {
      const [currentQuestion, setCurrentQuestion] = useState(0);
      const [showScore, setShowScore] = useState(false);
      const [userAnswers, setUserAnswers] = useState(Array(questions.length).fill(null));

      const sidebarRef = useRef(null);

      useEffect(() => {
        if (sidebarRef.current) {
          const activeElement = sidebarRef.current.querySelector('.bg-blue-600');
          if (activeElement) {
            activeElement.scrollIntoView({
              behavior: 'smooth',
              block: 'nearest'
            });
          }
        }
      }, [currentQuestion]);

      const handleAnswerOptionClick = (answerIndex) => {
        const newAnswers = [...userAnswers];
        newAnswers[currentQuestion] = answerIndex;
        setUserAnswers(newAnswers);
      };

      const handleNextClick = () => {
        const nextQuestion = currentQuestion + 1;
        if (nextQuestion < questions.length) {
          setCurrentQuestion(nextQuestion);
        } else {
          setShowScore(true);
        }
      };

      const handlePreviousClick = () => {
        const previousQuestion = currentQuestion - 1;
        if (previousQuestion >= 0) {
          setCurrentQuestion(previousQuestion);
        }
      };
      
      const handleSkipClick = () => {
        handleNextClick();
      };
      
      const handleQuestionNumberClick = (questionNumber) => {
        setCurrentQuestion(questionNumber - 1);
      };

      const calculateScore = () => {
        return userAnswers.reduce((total, answerIndex, index) => {
          if (answerIndex !== null) {
            const isCorrect = questions[index].answerOptions[answerIndex].isCorrect;
            return total + (isCorrect ? 1 : 0);
          }
          return total;
        }, 0);
      };

      const restartQuiz = () => {
        setCurrentQuestion(0);
        setUserAnswers(Array(questions.length).fill(null));
        setShowScore(false);
      };

      const currentAnswerIndex = userAnswers[currentQuestion];
      const finalScore = showScore ? calculateScore() : 0;
      
      // The render method is now pure JavaScript
      return e('div', { className: 'bg-gray-100 min-h-screen font-sans flex items-center justify-center p-4 dark:bg-gray-900 transition-colors duration-300' },
        e('div', { className: 'bg-white dark:bg-gray-800 shadow-2xl rounded-3xl p-8 w-full h-full max-w-screen-lg flex flex-col md:flex-row gap-8 text-gray-800 dark:text-gray-200 transition-colors duration-300' },
          e('div', { className: 'md:flex-1 w-full animate-fadeIn' },
            showScore ?
              e('div', { className: 'text-center md:p-8' },
                e('div', { className: 'flex justify-center mb-6' }, e(BadgeCheck, { className: 'w-16 h-16 text-green-500' })),
                e('h2', { className: 'text-3xl sm:text-4xl font-extrabold mb-4' }, 'Quiz Complete!'),
                e('p', { className: 'text-xl mb-8' },
                  'You scored ',
                  e('span', { className: 'text-blue-500 font-bold' }, finalScore),
                  ` out of ${questions.length}`
                ),
                e('button', {
                  onClick: restartQuiz,
                  className: 'group relative flex items-center justify-center px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-full transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl focus:outline-none focus:ring-4 focus:ring-blue-500 focus:ring-opacity-50'
                }, e(RefreshCcw, { className: 'w-5 h-5 mr-2 transition-all duration-300 group-hover:rotate-180' }), 'Restart Quiz')
              ) :
              e('div', { className: 'w-full' },
                e('div', { className: 'mb-6' },
                  e('h1', { className: 'text-4xl font-extrabold text-center text-blue-600 dark:text-blue-400 mb-2' }, 'COA Quiz'),
                  e('div', { className: 'flex justify-between items-center' },
                    e('div', { className: 'text-lg font-semibold text-blue-600 dark:text-blue-400' }, `Question ${currentQuestion + 1} / ${questions.length}`),
                    e('div', { className: 'text-xl font-bold' },
                      e('span', { className: 'text-green-500' }, userAnswers.filter(answer => answer !== null).length),
                      ' answered'
                    )
                  )
                ),
                e('div', { className: 'mb-8' },
                  e('h2', { className: 'text-2xl sm:text-3xl font-extrabold leading-tight' }, questions[currentQuestion].questionText)
                ),
                e('div', { className: 'flex flex-col space-y-4 mb-8' },
                  questions[currentQuestion].answerOptions.map((answerOption, index) =>
                    e('button', {
                      key: index,
                      onClick: () => handleAnswerOptionClick(index),
                      className: `group relative flex items-center w-full px-6 py-4 text-left text-lg rounded-xl shadow-md transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-blue-500 focus:ring-opacity-50 ${currentAnswerIndex === index ? 'bg-blue-600 text-white shadow-lg' : 'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-blue-100 dark:hover:bg-blue-600'}`
                    },
                      e('span', { className: 'flex-1' }, answerOption.answerText),
                      currentAnswerIndex === index && e(BadgeCheck, { className: 'w-6 h-6 ml-4 text-white' })
                    )
                  )
                ),
                e('div', { className: 'flex justify-between gap-4' },
                  e('button', {
                    onClick: handlePreviousClick,
                    disabled: currentQuestion === 0,
                    className: `group relative flex items-center justify-center px-6 py-3 font-bold rounded-full transition-all duration-300 transform hover:scale-105 shadow-md hover:shadow-lg focus:outline-none focus:ring-4 focus:ring-blue-500 focus:ring-opacity-50 ${currentQuestion === 0 ? 'bg-gray-300 dark:bg-gray-600 text-gray-500 cursor-not-allowed' : 'bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-gray-600'}`
                  }, e(ChevronLeft, { className: 'w-5 h-5 mr-2' }), 'Previous'),
                  e('div', { className: 'flex gap-4' },
                    currentQuestion < questions.length - 1 && e('button', {
                      onClick: handleSkipClick,
                      className: 'group relative flex items-center justify-center px-8 py-3 bg-yellow-500 hover:bg-yellow-600 text-white font-bold rounded-full transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl focus:outline-none focus:ring-4 focus:ring-yellow-500 focus:ring-opacity-50'
                    }, 'Skip', e(ChevronsRight, { className: 'w-5 h-5 ml-2 transition-all duration-300 group-hover:translate-x-1' })),
                    currentQuestion < questions.length - 1 ? e('button', {
                      onClick: handleNextClick,
                      disabled: currentAnswerIndex === null,
                      className: 'group relative flex items-center justify-center px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-full transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl focus:outline-none focus:ring-4 focus:ring-blue-500 focus:ring-opacity-50'
                    }, 'Next', e(ChevronRight, { className: 'w-5 h-5 ml-2 transition-all duration-300 group-hover:translate-x-1' })) : e('button', {
                      onClick: handleNextClick,
                      className: 'group relative flex items-center justify-center px-8 py-3 bg-green-600 hover:bg-green-700 text-white font-bold rounded-full transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl focus:outline-none focus:ring-4 focus:ring-green-500 focus:ring-opacity-50'
                    }, 'Submit Quiz', e(BadgeCheck, { className: 'w-5 h-5 ml-2 transition-all duration-300 group-hover:rotate-12' }))
                  )
                )
              )
          ),
          e('div', { className: 'md:w-64 w-full md:block hidden animate-fadeInLeft' },
            e('div', { className: 'bg-gray-50 dark:bg-gray-700 rounded-2xl p-6 h-full overflow-y-auto shadow-md' },
              e('h3', { className: 'text-lg font-bold text-gray-800 dark:text-gray-200 mb-4 sticky top-0 bg-gray-50 dark:bg-gray-700 pt-1 pb-2 border-b border-gray-200 dark:border-gray-600' }, 'Jump to Question'),
              e('div', { ref: sidebarRef, className: 'flex flex-wrap gap-2 justify-center' },
                questions.map((_, index) =>
                  e('button', {
                    key: index,
                    onClick: () => handleQuestionNumberClick(index + 1),
                    className: `w-10 h-10 text-sm font-bold rounded-full transition-all duration-200 ${currentQuestion === index ? 'bg-blue-600 text-white shadow-lg transform scale-110' : userAnswers[index] !== null ? 'bg-green-500 text-white hover:bg-green-600 shadow-md' : 'bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-500'}`
                  }, index + 1)
                )
              )
            )
          )
        )
      );
    };

    // Render the React component into the root element
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(e(App));
  </script>
</body>
</html>
